# Project Directory Structure Guide

This guide outlines the "Perfect" directory structure for the **In-House Ecosystem** project, leveraging Next.js 14+ (App Router), Supabase, and Shadcn UI. It prioritizes scalability, separation of concerns, and type safety.

## 1. Top-Level Overview

```
in-house-ecosystem/
├── app/                 # Next.js App Router (Routes & Pages)
├── components/          # React Components
│   ├── features/        # Feature-specific components (e.g., Tasks, Chat)
│   ├── layout/          # Application shell components (Sidebar, Navbar)
│   ├── ui/              # Shadcn UI primitives (Button, Card, etc.)
│   └── shared/          # Reusable shared components (e.g., LoadingSpinner)
├── docs/                # Project Documentation
├── hooks/               # Custom React Hooks
├── lib/                 # Utility functions & Core Configuration
├── public/              # Static Assets (Images, Icons)
├── styles/              # Global Styles
├── supabase/            # Database Migrations & Config
├── types/               # TypeScript Definitions
├── .env.local           # Environment Variables
└── next.config.js       # Next.js Config
```

---

## 2. Detailed Breakdown

### `/app` (Routes)
We use **Route Groups** `(name)` to organize layouts without affecting the URL path.

```
app/
├── (auth)/                  # Authentication Routes
│   ├── login/
│   │   └── page.tsx         # /login
│   ├── layout.tsx           # Auth-specific layout (centered, clean)
│   └── callback/            # Supabase Auth Callback
│       └── route.ts
├── (dashboard)/             # Protected Application Routes
│   ├── layout.tsx           # Main App Shell (Sidebar + Header Provider)
│   ├── page.tsx             # / (Redirects to /dashboard or /login)
│   ├── dashboard/
│   │   └── page.tsx         # /dashboard (Role-based: Admin vs Employee)
│   ├── tasks/
│   │   ├── page.tsx         # /tasks (List view)
│   │   ├── [taskId]/
│   │   │   └── page.tsx     # /tasks/123 (Details view)
│   │   └── new/             # (Optional: can be a modal instead)
│   ├── team/                # Admin Only
│   │   └── page.tsx         # /team
│   └── settings/
│       └── page.tsx         # /settings
├── api/                     # Backend API Routes (Edge Functions/Webhooks)
│   ├── chatbot/
│   │   └── route.ts         # AI Agent endpoint
│   └── cron/
│       └── reminders.ts     # Cron job endpoints (if not using pg_cron entirely)
├── globals.css              # Global CSS (Tailwind directives)
├── layout.tsx               # Root Layout (Fonts, Providers)
└── providers.tsx            # Client Providers (QueryClient, ThemeProvider)
```

### `/components` (UI Building Blocks)

```
components/
├── ui/                      # Generated by Shadcn CLI (DO NOT EDIT MANUALLY OFTEN)
│   ├── button.tsx
│   ├── card.tsx
│   ├── sheet.tsx            # For slide-overs
│   └── ...
├── layout/
│   ├── app-sidebar.tsx      # Main collapsible sidebar
│   ├── header.tsx           # Top user nav
│   └── page-container.tsx   # Wrapper for consistent padding
├── features/
│   ├── tasks/               # Task Module
│   │   ├── task-card.tsx
│   │   ├── task-list.tsx
│   │   ├── kanban-board.tsx
│   │   └── create-task-modal.tsx
│   ├── chat/                # Chatbot Module
│   │   ├── chat-drawer.tsx
│   │   ├── message-bubble.tsx
│   │   └── chat-input.tsx
│   └── users/               # User Management
│       └── user-table.tsx
└── shared/
    ├── status-badge.tsx     # Reusable logic for status colors
    ├── empty-state.tsx
    └── confirm-dialog.tsx
```

### `/lib` (Core Logic)

```
lib/
├── supabase/
│   ├── client.ts            # Client-side Supabase client
│   ├── server.ts            # Server-side Supabase client (cookies)
│   └── admin.ts             # Service Role client (Admin only - use sparingly)
├── utils.ts                 # Shadcn utility (clsx + tailwind-merge)
├── constants.ts             # App-wide constants (Menus, Labels)
└── validations/             # Zod Schemas
    ├── auth.ts
    ├── tasks.ts             # e.g. CreateTaskSchema
    └── chat.ts
```

### `/hooks` (State & Logic)

```
hooks/
├── use-auth.ts              # Wrapper around Supabase auth
├── use-tasks.ts             # TanStack Query hooks (useQuery, useMutation)
├── use-sidebar.ts           # Zustand store for UI state
└── use-chat.ts              # Logic for AI message streaming
```

### `/types` (TypeScript)
Use `supabase gen types` to auto-generate database types.

```
types/
├── supabase.ts              # Auto-generated database types
└── index.ts                 # App-specific overrides/unions
```

---

## 3. Best Practices for This Project

1.  **Server vs Client Components**:
    *   Pages (`page.tsx`) should generally be **Server Components** to fetch initial data.
    *   Interactive parts (Forms, Tables, Chat) should be **Client Components** (`"use client"`).
    *   Wrap client logic in `components/features/` and import them into pages.

2.  **Data Fetching**:
    *   Use **TanStack Query** in Client Components for real-time interactivity (Tasks, Chat).
    *   Use direct `supabase.from().select()` in Server Components for static/initial shell data.

3.  **State Management**:
    *   **URL State**: For filterable tables (Tasks), store state in the URL search params (e.g., `?status=todo`).
    *   **Zustand**: For global UI state (Sidebar open/close, Chat drawer open).

4.  **Styling**:
    *   Use Tailwind utility classes.
    *   For complex conditional classes, use the `cn()` utility from `lib/utils.ts`.
